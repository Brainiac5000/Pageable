/**
 * Pageable 0.4.0
 * 
 * https://github.com/Mobius1/Pageable
 * Released under the MIT license
 */
var _slicedToArray=function(){function f(g,j){var k=[],l=!0,m=!1,n;try{for(var q,p=g[Symbol.iterator]();!(l=(q=p.next()).done)&&(k.push(q.value),!(j&&k.length===j));l=!0);}catch(r){m=!0,n=r}finally{try{!l&&p["return"]&&p["return"]()}finally{if(m)throw n}}return k}return function(g,j){if(Array.isArray(g))return g;if(Symbol.iterator in Object(g))return f(g,j);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function f(g,j){for(var l,k=0;k<j.length;k++)l=j[k],l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(g,l.key,l)}return function(g,j,k){return j&&f(g.prototype,j),k&&f(g,k),g}}();function _possibleConstructorReturn(f,g){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&("object"==typeof g||"function"==typeof g)?g:f}function _inherits(f,g){if("function"!=typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function, not "+typeof g);f.prototype=Object.create(g&&g.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(f,g):f.__proto__=g)}function _classCallCheck(f,g){if(!(f instanceof g))throw new TypeError("Cannot call a class as a function")}var SlideShow=function(){function f(g){_classCallCheck(this,f),this.instance=g,this.running=!1,this.config=this.instance.config.slideshow}return _createClass(f,[{key:"start",value:function(){var j=this;this.running||(this.running=!0,this.instance.slideIndex=this.instance.index,this.instance.interval=setInterval(function(){j.instance.index<j.instance.pages.length-1?j.instance.slideIndex++:j.instance.slideIndex=0,j.instance.scrollToIndex(j.instance.slideIndex)},this.config.interval))}},{key:"stop",value:function(){this.running&&(clearInterval(this.instance.interval),this.instance.slideInterval=!1,this.running=!1)}}]),f}(),Emitter=function(){function f(){_classCallCheck(this,f)}return _createClass(f,[{key:"on",value:function(j,k){this.listeners=this.listeners||{},this.listeners[j]=this.listeners[j]||[],this.listeners[j].push(k)}},{key:"off",value:function(j,k){this.listeners=this.listeners||{},!1==j in this.listeners||this.listeners[j].splice(this.listeners[j].indexOf(k),1)}},{key:"emit",value:function(j){if(this.listeners=this.listeners||{},!1!=j in this.listeners)for(var k=0;k<this.listeners[j].length;k++)this.listeners[j][k].apply(this,[].slice.call(arguments,1))}}]),f}(),Pageable=function(f){function g(j){var k=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,g);var l=_possibleConstructorReturn(this,(g.__proto__||Object.getPrototypeOf(g)).call(this));if(void 0===j){var m;return m=console.error("Pageable:","No container defined."),_possibleConstructorReturn(l,m)}var n={pips:!0,interval:300,delay:0,throttle:50,orientation:"vertical",easing:function(v,w,x,y){return-x*(v/=y)*(v-2)+w},onInit:function(){},onUpdate:function(){},onBeforeStart:function(){},onStart:function(){},onScroll:function(){},onFinish:function(){},swipeThreshold:50,freeScroll:!1,slideshow:!1,infinite:!1,events:{wheel:!0,mouse:!0,touch:!0}};if(l.container="string"==typeof j?document.querySelector(j):j,!l.container){var p;return p=console.error("Pageable:","The container could not be found."),_possibleConstructorReturn(l,p)}if(l.config=Object.assign({},n,k),l.events=Object.assign({},n.events,k.events),l.config.anchors&&Array.isArray(l.config.anchors)){var q=document.createDocumentFragment();l.config.anchors.forEach(function(u){var v=document.createElement("div");v.dataset.anchor=u,q.appendChild(v)}),l.container.appendChild(q)}if(l.pages=l.container.querySelectorAll("[data-anchor]"),!l.pages.length){var r;return r=console.error("Pageable:","No child nodes with the [data-anchor] attribute could be found."),_possibleConstructorReturn(l,r)}return l.horizontal="horizontal"===l.config.orientation,l.anchors=[],l.pages.forEach(function(u,v){var w=u.dataset.anchor.replace(/\s+/,"-");u.id!==w&&(u.id=w),l.anchors.push("#"+w),u.classList.add("pg-page"),u.classList.toggle("pg-active",0==v)}),l.axis=l.horizontal?"x":"y",l.mouseAxis={x:"clientX",y:"clientY"},l.scrollAxis={x:"scrollLeft",y:"scrollTop"},l.size={x:"width",y:"height"},l.bar=l._getScrollBarWidth(),l.index=0,l.slideIndex=0,l.initialised=!1,l.touch="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,l.init(),l}return _inherits(g,f),_createClass(g,[{key:"init",value:function(){if(!this.initialised){var k=this.config;this.wrapper=document.createElement("div"),this.container.parentNode.insertBefore(this.wrapper,this.container),this.wrapper.appendChild(this.container),this.wrapper.classList.add("pg-wrapper","pg-"+k.orientation),this.wrapper.classList.add("pg-wrapper"),this.container.classList.add("pg-container"),document.body.style.margin=0,document.body.style.overflow="hidden",this.container.style.display="inline-block",k.freeScroll&&0<k.delay&&(k.delay=0);for(var l=["Prev","Next"],m=0;m<l.length;m++){var n=l[m],p="nav"+n+"El";k[p]&&("string"==typeof k[p]?this[p]=document.querySelector(k[p]):k[p]instanceof Element&&(this[p]=k[p]),this[p]&&(this[p].classList.add("pg-nav"),this[p].onclick=this[n.toLowerCase()].bind(this)))}if(k.pips){var w,q=document.createElement("nav"),r=document.createElement("ul"),u=!0,v=!1;try{for(var y,x=this.pages.entries()[Symbol.iterator]();!(u=(y=x.next()).done);u=!0){var z=_slicedToArray(y.value,2),A=z[0],B=z[1],C=document.createElement("li"),D=document.createElement("a"),E=document.createElement("span");D.href="#"+B.id,0==A&&D.classList.add("active"),D.appendChild(E),C.appendChild(D),r.appendChild(C)}}catch(H){v=!0,w=H}finally{try{!u&&x.return&&x.return()}finally{if(v)throw w}}q.appendChild(r),this.wrapper.appendChild(q),this.pips=Array.from(r.children)}if(this.pageCount=this.pages.length,this.lastIndex=this.pageCount-1,k.infinite){var F=this.pages[0].cloneNode(!0),G=this.pages[this.lastIndex].cloneNode(!0);F.id+="-clone",G.id+="-clone",F.classList.remove("pg-active"),G.classList.remove("pg-active"),this.clones=[F,G],this.container.insertBefore(G,this.pages[0]),this.container.appendChild(F)}this.bind(),this.update(),this.initialised=!0,k.slideshow&&(this.slider=new SlideShow(this),this.slider.start())}}},{key:"bind",value:function(){var k=this,l=arguments;this.callbacks={wheel:this._wheel.bind(this),update:function(p,q,r){var u;return function(){if(r=r||k,!u)return p.apply(r,l),u=!0,setTimeout(function(){u=!1},q)}}(this.update.bind(this),this.config.throttle),load:this._load.bind(this),start:this._start.bind(this),drag:this._drag.bind(this),stop:this._stop.bind(this),click:this._click.bind(this)},this.wrapper.addEventListener("wheel",this.callbacks.wheel,!1),window.addEventListener("resize",this.callbacks.update,!1),this.wrapper.addEventListener(this.touch?"touchstart":"mousedown",this.callbacks.start,!1),window.addEventListener(this.touch?"touchmove":"mousemove",this.callbacks.drag,!1),window.addEventListener(this.touch?"touchend":"mouseup",this.callbacks.stop,!1),document.addEventListener("readystatechange",function(){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",k.events.load):k._load()}),document.addEventListener("click",this.callbacks.click,!1)}},{key:"unbind",value:function(){this.wrapper.removeEventListener("wheel",this.callbacks.wheel),window.removeEventListener("resize",this.callbacks.update),this.wrapper.removeEventListener(this.touch?"touchstart":"mousedown",this.callbacks.start),window.addEventListener(this.touch?"touchmove":"mousemove",this.callbacks.drag),window.removeEventListener(this.touch?"touchend":"mouseup",this.callbacks.stop),document.removeEventListener("click",this.callbacks.click)}},{key:"scrollToPage",value:function(k){this.scrollToIndex(k-1)}},{key:"scrollToAnchor",value:function(k){this.scrollToIndex(this.anchors.indexOf(k))}},{key:"scrollToIndex",value:function(k){if(!this.scrolling&&0<=k&&k<=this.pages.length-1){var l=this.index;this.index=k,this.oldIndex=l,this._scrollBy(this._getScrollAmount(l))}}},{key:"next",value:function(){if(this.config.infinite){var k=this.index;k===this.lastIndex&&(k++,this._scrollBy(-this.data.window[this.size[this.axis]],k))}this.scrollToIndex(this.index+1)}},{key:"prev",value:function(){if(this.config.infinite){var k=this.index;0===k&&(k--,this._scrollBy(this.data.window[this.size[this.axis]],k))}this.scrollToIndex(this.index-1)}},{key:"update",value:function(){var k=this;clearTimeout(this.timer),this.data={window:{width:window.innerWidth,height:window.innerHeight},container:{height:this.wrapper.scrollHeight,width:this.wrapper.scrollWidth}};var l=this.size[this.axis],m=this.horizontal?this.size.y:this.size.x;this.wrapper.style["overflow-"+this.axis]="scroll",this.wrapper.style[l]=this.data.window[l]+"px",this.wrapper.style[m]=this.data.window[m]+this.bar+"px";var n=this.config.infinite?this.pages.length+2:this.pages.length,p=this.config.infinite?this.data.window[l]:0;if(this.container.style[l]=n*this.data.window[l]+"px",this.wrapper.style["padding-"+(this.horizontal?"bottom":"right")]=this.bar+"px",this.wrapper[this.scrollAxis[this.axis]]=this.index*this.data.window[l]+p,this.scrollSize=n*this.data.window[l]-this.data.window[l],this.scrollPosition=this.data.window[l]*this.index+p,this.pages.forEach(function(y){k.horizontal&&(y.style.float="left"),y.style[l]=k.data.window[l]+"px",y.style[m]=k.data.window[m]+"px"}),this.config.infinite){var u,q=!0,r=!1;try{for(var w,x,v=this.clones[Symbol.iterator]();!(q=(w=v.next()).done);q=!0)x=w.value,this.horizontal&&(x.style.float="left"),x.style[l]=this.data.window[l]+"px",x.style[m]=this.data.window[m]+"px"}catch(y){r=!0,u=y}finally{try{!q&&v.return&&v.return()}finally{if(r)throw u}}}this.config.onUpdate.call(this,this._getData()),this.emit("update",this._getData())}},{key:"orientate",value:function(k){switch(k){case"vertical":this.horizontal=!1,this.axis="y",this.container.style.width="";break;case"horizontal":this.horizontal=!0,this.axis="x",this.container.style.height="";break;default:return!1;}this.wrapper.classList.toggle("pg-vertical",!this.horizontal),this.wrapper.classList.toggle("pg-horizontal",this.horizontal),this.config.orientation=k,this.update()}},{key:"slideshow",value:function(){return this.slider}},{key:"destroy",value:function(){if(this.initialised){this.emit("destroy"),this.unbind(),document.body.style.margin="",document.body.style.overflow="",this.container.style.display="",this.container.style.height="",this.container.style.width="",this.container.classList.remove("pg-container"),this.wrapper.parentNode.replaceChild(this.container,this.wrapper);var m,k=!0,l=!1;try{for(var p,q,n=this.pages[Symbol.iterator]();!(k=(p=n.next()).done);k=!0)q=p.value,q.style.height="",q.style.width="",q.classList.remove("pg-page"),q.classList.remove("pg-active")}catch(x){l=!0,m=x}finally{try{!k&&n.return&&n.return()}finally{if(l)throw m}}for(var r=["Prev","Next"],u=0;u<r.length;u++){var v=r[u],w="nav"+v+"El";this[w]&&(this[w].classList.remove("active"),this[w].classList.remove("pg-nav"),this[w].onclick=function(){})}this.config.slideshow&&(clearInterval(this.slideInterval),this.slideInterval=!1),this.initialised=!1}}},{key:"_click",value:function(k){if(k.target.closest){var l=k.target.closest("a");l&&this.anchors.includes(l.hash)&&(k.preventDefault(),this.scrollToAnchor(l.hash))}}},{key:"_start",value:function(k){if(k.preventDefault(),k.stopPropagation(),this.scrolling||this.dragging)return!1;if("touchstart"===k.type&&!this.events.touch)return!1;if("mousedown"===k.type&&!this.events.mouse)return 1===k.button&&k.preventDefault(),!1;var l=this._getEvent(k);return!!l.target.closest("[data-anchor]")&&void(this.dragging=this.config.freeScroll,this.down={x:l.clientX,y:l.clientY},this.config.onBeforeStart.call(this,this.index))}},{key:"_drag",value:function(k){if(this.config.freeScroll&&this.dragging&&!this.scrolling){var l=this._getEvent(k),m=this._limitDrag(l),n=this._getData();this.container.style.transform=this.horizontal?"translate3d("+m+"px, 0, 0)":"translate3d(0, "+m+"px, 0)",n.scrolled-=m,this.config.onScroll.call(this,n,"drag"),this.emit("scroll",n)}}},{key:"_stop",value:function(k){var l=this,m=this._getEvent(k),n=function(){return l.index<l.pages.length-1&&l.index++},p=function(){return 0<l.index&&l.index--};this.config.slideshow&&this.slider.start();var q=this.index,r=this.down&&Math.abs(m[this.mouseAxis[this.axis]]-this.down[this.axis])>=this.config.swipeThreshold;if(this.dragging&&!this.scrolling){var u=this._limitDrag(m);return this.dragging=u,r&&(this.config.infinite&&this._overScroll(0>u,u),0<u?p():n()),this._scrollBy(this._getScrollAmount(q)-u),void(this.down=!1)}if(this.down&&!this.scrolling){var v=k[this.mouseAxis[this.axis]]<this.down[this.axis],w=k[this.mouseAxis[this.axis]]>this.down[this.axis];r&&(this.config.infinite&&this._overScroll(v),v?n():w&&p()),q===this.index?this.config.onFinish.call(this,this._getData()):(this.oldIndex=q,this._scrollBy(this._getScrollAmount(q))),this.down=!1}}},{key:"_wheel",value:function(k){if(k.preventDefault(),this.events.wheel&&!this.scrolling){var l=this.index,m=this.index,n=0<k.deltaY;this.config.infinite&&this._overScroll(n),n?this.index<this.pages.length-1&&l++:0<this.index&&l--,l!==m&&(this.oldIndex=m,this.scrollToIndex(l))}}},{key:"_load",value:function(){var l=this,m=location.hash;if(m){var n=this.anchors.indexOf(m);if(-1<n){this.scrollPosition=this.data.window[this.size[this.axis]]*n;var p=this._getData();this.index=n,this.slideIndex=n,this._setPips(),this.pages.forEach(function(r,u){r.classList.toggle("pg-active",u===l.index)}),this._setNavs(),this.config.onScroll.call(this,p,"load"),this.config.onFinish.call(this,p,"load"),this.emit("scroll",p)}}this.update();var q=this._getData();this.config.onInit.call(this,q,"load"),this.emit("init",q)}},{key:"_getEvent",value:function(k){return this.touch?"touchend"===k.type?k.changedTouches[0]:k.touches[0]:k}},{key:"_getData",value:function(){return{index:this.index,scrolled:this.config.infinite?this.scrollPosition-this.data.window[this.size[this.axis]]:this.scrollPosition,max:this.config.infinite?this.scrollSize-2*this.data.window[this.size[this.axis]]:this.scrollSize}}},{key:"_overScroll",value:function(k){var l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,m=this.index;m===this.lastIndex&&k?(m++,this._scrollBy(-this.data.window[this.size[this.axis]]-l,m)):0===m&&!k&&(m--,this._scrollBy(this.data.window[this.size[this.axis]]-l,m))}},{key:"_scrollBy",value:function(k,l){var m=this;return!this.scrolling&&void(this.scrolling=!0,this.config.onBeforeStart.call(this,this.oldIndex),this.emit("scroll.before",this._getData()),this.config.slideshow&&this.slider.stop(),this.timer=setTimeout(function(){var n=Date.now(),p=m._getScrollOffset();m.config.onStart.call(m,m.pages[m.index].id),m.emit("scroll.start",m._getData()),m.frame=requestAnimationFrame(function r(){var u=Date.now(),v=u-n;if(v>m.config.interval){cancelAnimationFrame(m.frame),m.container.style.transform="",m.frame=!1,m.scrolling=!1,m.dragging=!1,m.config.slideshow&&m.slider.start(),m.config.infinite&&(l===m.pageCount?m.index=0:-1===l&&(m.index=m.lastIndex));var w=m._getData();return window.location.hash=m.pages[m.index].id,m.pages.forEach(function(A,B){A.classList.toggle("pg-active",B===m.index)}),m.slideIndex=m.index,m._setPips(),m._setNavs(),m.config.onFinish.call(m,w),m.emit("scroll.end",w),!1}var x=m.dragging?m.dragging:0,y=m.config.easing(v,x,k,m.config.interval);m.container.style.transform=m.horizontal?"translate3d("+y+"px, 0, 0)":"translate3d(0, "+y+"px, 0)",m.scrollPosition=p[m.axis]-y;var z=m._getData();m.config.infinite&&(l===m.pageCount?z.scrolled=0:-1===l&&(z.scrolled=z.max)),m.config.onScroll.call(m,z),m.emit("scroll",z),m.frame=requestAnimationFrame(r)})},this.config.delay))}},{key:"_getScrollOffset",value:function(){return{x:this.wrapper.scrollLeft,y:this.wrapper.scrollTop}}},{key:"_getScrollAmount",value:function(k,l){void 0===l&&(l=this.index);var m=this.data.window[this.size[this.axis]],p=m*l;return m*k-p}},{key:"_getScrollBarWidth",value:function(){var k=document.body,l=document.createElement("div"),m=0;return l.style.cssText="width: 100; height: 100; overflow: scroll; position: absolute; top: -9999;",k.appendChild(l),m=l.offsetWidth-l.clientWidth,k.removeChild(l),m}},{key:"_limitDrag",value:function(k){var l=k[this.mouseAxis[this.axis]]-this.down[this.axis];return!this.config.infinite&&(0===this.index&&0<l||this.index===this.pages.length-1&&0>l)&&(l/=10),l}},{key:"_setNavs",value:function(){this.navPrevEl&&this.navPrevEl.classList.toggle("active",this.config.infinite||0<this.index),this.navNextEl&&this.navNextEl.classList.toggle("active",this.config.infinite||this.index<this.pages.length-1)}},{key:"_setPips",value:function(k){this.config.pips&&(void 0===k&&(k=this.index),this.pips.forEach(function(l,m){l.firstElementChild.classList.toggle("active",m==k)}))}}]),g}(Emitter);