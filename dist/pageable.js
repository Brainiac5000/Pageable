/**
 * Pageable 0.4.3
 * 
 * https://github.com/Mobius1/Pageable
 * Released under the MIT license
 */
var _slicedToArray=function(){return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return function(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i.return&&_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var SlideShow=function(){function SlideShow(instance){_classCallCheck(this,SlideShow),this.instance=instance,this.running=!1,this.config=this.instance.config.slideshow}return _createClass(SlideShow,[{key:"start",value:function(){var _this=this;this.running||(this.running=!0,this.instance.slideIndex=this.instance.index,this.instance.interval=setInterval(function(){_this.instance.config.infinite&&_this.instance._overScroll(!0),_this.instance.index<_this.instance.pages.length-1?_this.instance.slideIndex++:_this.instance.slideIndex=0,_this.instance.scrollToIndex(_this.instance.slideIndex)},this.config.interval))}},{key:"stop",value:function(){this.running&&(clearInterval(this.instance.interval),this.instance.slideInterval=!1,this.running=!1)}}]),SlideShow}(),Emitter=function(){function Emitter(){_classCallCheck(this,Emitter)}return _createClass(Emitter,[{key:"on",value:function(listener,callback){this.listeners=this.listeners||{},this.listeners[listener]=this.listeners[listener]||[],this.listeners[listener].push(callback)}},{key:"off",value:function(listener,callback){this.listeners=this.listeners||{},listener in this.listeners!=!1&&this.listeners[listener].splice(this.listeners[listener].indexOf(callback),1)}},{key:"emit",value:function(listener){if(this.listeners=this.listeners||{},listener in this.listeners!=!1)for(var i=0;i<this.listeners[listener].length;i++)this.listeners[listener][i].apply(this,[].slice.call(arguments,1))}}]),Emitter}(),Pageable=function(_Emitter){function Pageable(container){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,Pageable);var _ret,_this2=_possibleConstructorReturn(this,(Pageable.__proto__||Object.getPrototypeOf(Pageable)).call(this));if(void 0===container)return _ret=console.error("Pageable:","No container defined."),_possibleConstructorReturn(_this2,_ret);var _ret2,_ret3,defaults={pips:!0,interval:300,delay:0,throttle:50,orientation:"vertical",easing:function(t,b,c,d,s){return-c*(t/=d)*(t-2)+b},onInit:function(){},onUpdate:function(){},onBeforeStart:function(){},onStart:function(){},onScroll:function(){},onFinish:function(){},swipeThreshold:50,freeScroll:!1,slideshow:!1,infinite:!1,events:{wheel:!0,mouse:!0,touch:!0}};if(_this2.container="string"==typeof container?document.querySelector(container):container,!_this2.container)return _ret2=console.error("Pageable:","The container could not be found."),_possibleConstructorReturn(_this2,_ret2);if(_this2.config=Object.assign({},defaults,options),_this2.events=Object.assign({},defaults.events,options.events),_this2.config.anchors&&Array.isArray(_this2.config.anchors)){var frag=document.createDocumentFragment();_this2.config.anchors.forEach(function(anchor){var page=document.createElement("div");page.dataset.anchor=anchor,frag.appendChild(page)}),_this2.container.appendChild(frag)}return _this2.pages=_this2.container.querySelectorAll("[data-anchor]"),_this2.pages.length?(_this2.horizontal="horizontal"===_this2.config.orientation,_this2.anchors=[],_this2.pages.forEach(function(page,i){var clean=page.dataset.anchor.replace(/\s+/,"-");page.id!==clean&&(page.id=clean),_this2.anchors.push("#"+clean),page.classList.add("pg-page"),page.classList.toggle("pg-active",0==i)}),_this2.axis=_this2.horizontal?"x":"y",_this2.mouseAxis={x:"clientX",y:"clientY"},_this2.scrollAxis={x:"scrollLeft",y:"scrollTop"},_this2.size={x:"width",y:"height"},_this2.bar=_this2._getScrollBarWidth(),_this2.index=0,_this2.slideIndex=0,_this2.initialised=!1,_this2.touch="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,_this2.init(),_this2):(_ret3=console.error("Pageable:","No child nodes with the [data-anchor] attribute could be found."),_possibleConstructorReturn(_this2,_ret3))}return _inherits(Pageable,Emitter),_createClass(Pageable,[{key:"init",value:function(){if(!this.initialised){var o=this.config;this.wrapper=document.createElement("div"),this.container.parentNode.insertBefore(this.wrapper,this.container),this.wrapper.appendChild(this.container),this.wrapper.classList.add("pg-wrapper","pg-"+o.orientation),this.wrapper.classList.add("pg-wrapper"),this.container.classList.add("pg-container"),document.body.style.margin=0,document.body.style.overflow="hidden",this.container.style.display="inline-block",o.freeScroll&&o.delay>0&&(o.delay=0);for(var _arr=["Prev","Next"],_i=0;_i<_arr.length;_i++){var str="nav"+_arr[_i]+"El";o[str]&&("string"==typeof o[str]?this[str]=document.querySelector(o[str]):o[str]instanceof Element&&(this[str]=o[str]),this[str]&&this[str].classList.add("pg-nav"))}if(o.pips){var nav=document.createElement("nav"),ul=document.createElement("ul"),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.pages.entries()[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var _ref=_step.value,_ref2=_slicedToArray(_ref,2),index=_ref2[0],page=_ref2[1],li=document.createElement("li"),a=document.createElement("a"),span=document.createElement("span");a.href="#"+page.id,0==index&&a.classList.add("active"),a.appendChild(span),li.appendChild(a),ul.appendChild(li)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}nav.appendChild(ul),this.wrapper.appendChild(nav),this.pips=Array.from(ul.children)}if(this.pageCount=this.pages.length,this.lastIndex=this.pageCount-1,o.infinite){var first=this.pages[0].cloneNode(!0),last=this.pages[this.lastIndex].cloneNode(!0);first.id=first.id+"-clone",last.id=last.id+"-clone",first.classList.remove("pg-active"),last.classList.remove("pg-active"),this.clones=[first,last],this.container.insertBefore(last,this.pages[0]),this.container.appendChild(first)}this.bind(),this.update(),this.initialised=!0,o.slideshow&&(this.slider=new SlideShow(this),this.slider.start())}}},{key:"bind",value:function(){var fn,limit,context,wait,_this3=this,_arguments=arguments;this.callbacks={wheel:this._wheel.bind(this),update:(fn=this.update.bind(this),limit=this.config.throttle,wait=void 0,function(){if(context=context||_this3,!wait)return fn.apply(context,_arguments),wait=!0,setTimeout(function(){wait=!1},limit)}),load:this._load.bind(this),start:this._start.bind(this),drag:this._drag.bind(this),stop:this._stop.bind(this),click:this._click.bind(this),prev:this.prev.bind(this),next:this.next.bind(this)},this.wrapper.addEventListener("wheel",this.callbacks.wheel,!1),window.addEventListener("resize",this.callbacks.update,!1),this.wrapper.addEventListener(this.touch?"touchstart":"mousedown",this.callbacks.start,!1),window.addEventListener(this.touch?"touchmove":"mousemove",this.callbacks.drag,!1),window.addEventListener(this.touch?"touchend":"mouseup",this.callbacks.stop,!1),this.navPrevEl&&(this.navPrevEl.addEventListener("click",this.callbacks.prev,!1),this.navNextEl&&this.navNextEl.addEventListener("click",this.callbacks.next,!1)),document.addEventListener("readystatechange",function(e){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",_this3.events.load):_this3._load()}),"complete"===document.readyState&&this._load(),document.addEventListener("click",this.callbacks.click,!1)}},{key:"unbind",value:function(){this.wrapper.removeEventListener("wheel",this.callbacks.wheel),window.removeEventListener("resize",this.callbacks.update),this.wrapper.removeEventListener(this.touch?"touchstart":"mousedown",this.callbacks.start),window.addEventListener(this.touch?"touchmove":"mousemove",this.callbacks.drag),window.removeEventListener(this.touch?"touchend":"mouseup",this.callbacks.stop),this.navPrevEl&&(this.navPrevEl.removeEventListener("click",this.callbacks.prev,!1),this.navNextEl&&this.navNextEl.removeEventListener("click",this.callbacks.next,!1)),document.removeEventListener("click",this.callbacks.click)}},{key:"scrollToPage",value:function(page){this.scrollToIndex(page-1)}},{key:"scrollToAnchor",value:function(id){this.scrollToIndex(this.anchors.indexOf(id))}},{key:"scrollToIndex",value:function(index){if(!this.scrolling&&index>=0&&index<=this.pages.length-1){var oldIndex=this.index;this.index=index,this.oldIndex=oldIndex,this._scrollBy(this._getScrollAmount(oldIndex))}}},{key:"next",value:function(){if(this.config.infinite){var index=this.index;index===this.lastIndex&&(index++,this._scrollBy(-this.data.window[this.size[this.axis]],index))}this.scrollToIndex(this.index+1)}},{key:"prev",value:function(){if(this.config.infinite){var index=this.index;0===index&&(index--,this._scrollBy(this.data.window[this.size[this.axis]],index))}this.scrollToIndex(this.index-1)}},{key:"update",value:function(){var _this4=this;clearTimeout(this.timer),this.data={window:{width:window.innerWidth,height:window.innerHeight},container:{height:this.wrapper.scrollHeight,width:this.wrapper.scrollWidth}};var size=this.size[this.axis],opp=this.horizontal?this.size.y:this.size.x;this.wrapper.style["overflow-"+this.axis]="scroll",this.wrapper.style[size]=this.data.window[size]+"px",this.wrapper.style[opp]=this.data.window[opp]+this.bar+"px";var len=this.config.infinite?this.pages.length+2:this.pages.length,offset=this.config.infinite?this.data.window[size]:0;if(this.container.style[size]=len*this.data.window[size]+"px",this.wrapper.style["padding-"+(this.horizontal?"bottom":"right")]=this.bar+"px",this.wrapper[this.scrollAxis[this.axis]]=this.index*this.data.window[size]+offset,this.scrollSize=len*this.data.window[size]-this.data.window[size],this.scrollPosition=this.data.window[size]*this.index+offset,this.pages.forEach(function(page,i){_this4.horizontal&&(page.style.float="left"),page.style[size]=_this4.data.window[size]+"px",page.style[opp]=_this4.data.window[opp]+"px"}),this.config.infinite){var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=this.clones[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var clone=_step2.value;this.horizontal&&(clone.style.float="left"),clone.style[size]=this.data.window[size]+"px",clone.style[opp]=this.data.window[opp]+"px"}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}this.config.onUpdate.call(this,this._getData()),this.emit("update",this._getData())}},{key:"orientate",value:function(type){switch(type){case"vertical":this.horizontal=!1,this.axis="y",this.container.style.width="";break;case"horizontal":this.horizontal=!0,this.axis="x",this.container.style.height="";break;default:return!1}this.wrapper.classList.toggle("pg-vertical",!this.horizontal),this.wrapper.classList.toggle("pg-horizontal",this.horizontal),this.config.orientation=type,this.update()}},{key:"slideshow",value:function(){return this.slider}},{key:"destroy",value:function(){if(this.initialised){this.emit("destroy"),this.unbind(),document.body.style.margin="",document.body.style.overflow="",this.container.style.display="",this.container.style.height="",this.container.style.width="",this.container.classList.remove("pg-container"),this.wrapper.parentNode.replaceChild(this.container,this.wrapper);var _iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=this.pages[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var page=_step3.value;page.style.height="",page.style.width="",page.style.float="",page.classList.remove("pg-page"),page.classList.remove("pg-active")}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{!_iteratorNormalCompletion3&&_iterator3.return&&_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}for(var _arr2=["Prev","Next"],_i2=0;_i2<_arr2.length;_i2++){var str="nav"+_arr2[_i2]+"El";this[str]&&(this[str].classList.remove("active"),this[str].classList.remove("pg-nav"))}if(this.config.infinite){var _iteratorNormalCompletion4=!0,_didIteratorError4=!1,_iteratorError4=void 0;try{for(var _step4,_iterator4=this.clones[Symbol.iterator]();!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=!0){var clone=_step4.value;this.container.removeChild(clone)}}catch(err){_didIteratorError4=!0,_iteratorError4=err}finally{try{!_iteratorNormalCompletion4&&_iterator4.return&&_iterator4.return()}finally{if(_didIteratorError4)throw _iteratorError4}}}this.config.slideshow&&(this.slider.stop(),this.slider=!1),this.initialised=!1}}},{key:"_click",value:function(e){if(e.target.closest){var anchor=e.target.closest("a");anchor&&this.anchors.includes(anchor.hash)&&(e.preventDefault(),this.scrollToAnchor(anchor.hash))}}},{key:"_start",value:function(e){if(e.preventDefault(),e.stopPropagation(),this.scrolling||this.dragging)return!1;if("touchstart"===e.type&&!this.events.touch)return!1;if("mousedown"===e.type&&!this.events.mouse)return 1===e.button&&e.preventDefault(),!1;var evt=this._getEvent(e);if(!evt.target.closest("[data-anchor]"))return!1;this.dragging=this.config.freeScroll,this.down={x:evt.clientX,y:evt.clientY},this.config.onBeforeStart.call(this,this.index)}},{key:"_drag",value:function(e){if(this.config.freeScroll&&this.dragging&&!this.scrolling){var evt=this._getEvent(e),scrolled=this._limitDrag(evt),data=this._getData();this.container.style.transform=this.horizontal?"translate3d("+scrolled+"px, 0, 0)":"translate3d(0, "+scrolled+"px, 0)",data.scrolled-=scrolled,this.config.onScroll.call(this,data,"drag"),this.emit("scroll",data)}}},{key:"_stop",value:function(e){var _this5=this,evt=this._getEvent(e),inc=function(){return _this5.index<_this5.pages.length-1&&_this5.index++},dec=function(){return 0<_this5.index&&_this5.index--};this.config.slideshow&&this.slider.start();var oldIndex=this.index,canChange=this.down&&Math.abs(evt[this.mouseAxis[this.axis]]-this.down[this.axis])>=this.config.swipeThreshold;if(this.dragging&&!this.scrolling){var scrolled=this._limitDrag(evt);return this.dragging=scrolled,canChange&&(this.config.infinite&&this._overScroll(scrolled<0,scrolled),scrolled>0?dec():inc()),this._scrollBy(this._getScrollAmount(oldIndex)-scrolled),void(this.down=!1)}if(this.down&&!this.scrolling){var pos=e[this.mouseAxis[this.axis]]<this.down[this.axis],neg=e[this.mouseAxis[this.axis]]>this.down[this.axis];canChange&&(this.config.infinite&&this._overScroll(pos),pos?inc():neg&&dec()),oldIndex===this.index?this.config.onFinish.call(this,this._getData()):(this.oldIndex=oldIndex,this._scrollBy(this._getScrollAmount(oldIndex))),this.down=!1}}},{key:"_wheel",value:function(e){if(e.preventDefault(),this.events.wheel&&!this.scrolling){var index=this.index,oldIndex=this.index,inc=0<e.deltaY;this.config.infinite&&this._overScroll(inc),inc?this.index<this.pages.length-1&&index++:0<this.index&&index--,index!==oldIndex&&(this.oldIndex=oldIndex,this.scrollToIndex(index))}}},{key:"_load",value:function(e){var _this6=this,id=location.hash;if(id){var index=this.anchors.indexOf(id);if(index>-1){var offset=this.config.infinite?1:0;this.scrollPosition=this.data.window[this.size[this.axis]]*(index+offset);var _data=this._getData();this.index=index,this.slideIndex=index,this.pages.forEach(function(page,i){page.classList.toggle("pg-active",i===_this6.index)}),this._setNavs(),this._setPips(),this.config.onScroll.call(this,_data),this.config.onFinish.call(this,_data),this.emit("scroll",_data)}}this.update();var data=this._getData();this.config.onInit.call(this,data),this.emit("init",data)}},{key:"_getEvent",value:function(e){return this.touch?"touchend"===e.type?e.changedTouches[0]:e.touches[0]:e}},{key:"_getData",value:function(){return{index:this.index,scrolled:this.config.infinite?this.scrollPosition-this.data.window[this.size[this.axis]]:this.scrollPosition,max:this.config.infinite?this.scrollSize-2*this.data.window[this.size[this.axis]]:this.scrollSize}}},{key:"_overScroll",value:function(inc){var scrolled=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,index=this.index;index===this.lastIndex&&inc?(index++,this._scrollBy(-this.data.window[this.size[this.axis]]-scrolled,index)):0!==index||inc||(index--,this._scrollBy(this.data.window[this.size[this.axis]]-scrolled,index))}},{key:"_scrollBy",value:function(amount,index){var _this7=this;if(this.scrolling)return!1;this.scrolling=!0,this.config.onBeforeStart.call(this,this.oldIndex),this.emit("scroll.before",this._getData()),this.config.slideshow&&this.slider.stop(),this.timer=setTimeout(function(){var st=Date.now(),offset=_this7._getScrollOffset();_this7.config.onStart.call(_this7,_this7.pages[_this7.index].id),_this7.emit("scroll.start",_this7._getData()),_this7.frame=requestAnimationFrame(function scroll(){var ct=Date.now()-st;if(ct>_this7.config.interval){cancelAnimationFrame(_this7.frame),_this7.container.style.transform="",_this7.frame=!1,_this7.scrolling=!1,_this7.dragging=!1,_this7.config.slideshow&&_this7.slider.start(),_this7.config.infinite&&(index===_this7.pageCount?_this7.index=0:-1===index&&(_this7.index=_this7.lastIndex));var _data2=_this7._getData();return window.location.hash=_this7.pages[_this7.index].id,_this7.pages.forEach(function(page,i){page.classList.toggle("pg-active",i===_this7.index)}),_this7.slideIndex=_this7.index,_this7._setPips(),_this7._setNavs(),_this7.config.onFinish.call(_this7,_data2),_this7.emit("scroll.end",_data2),!1}var start=_this7.dragging?_this7.dragging:0,scrolled=_this7.config.easing(ct,start,amount,_this7.config.interval);_this7.container.style.transform=_this7.horizontal?"translate3d("+scrolled+"px, 0, 0)":"translate3d(0, "+scrolled+"px, 0)",_this7.scrollPosition=offset[_this7.axis]-scrolled;var data=_this7._getData();_this7.config.infinite&&(index===_this7.pageCount?data.scrolled=0:-1===index&&(data.scrolled=data.max)),_this7.config.onScroll.call(_this7,data),_this7.emit("scroll",data),_this7.frame=requestAnimationFrame(scroll)})},this.config.delay)}},{key:"_getScrollOffset",value:function(){return{x:this.wrapper.scrollLeft,y:this.wrapper.scrollTop}}},{key:"_getScrollAmount",value:function(oldIndex,newIndex){void 0===newIndex&&(newIndex=this.index);var h=this.data.window[this.size[this.axis]];return h*oldIndex-h*newIndex}},{key:"_getScrollBarWidth",value:function(){var t,db=document.body,div=document.createElement("div");return div.style.cssText="width: 100; height: 100; overflow: scroll; position: absolute; top: -9999;",db.appendChild(div),t=div.offsetWidth-div.clientWidth,db.removeChild(div),t}},{key:"_limitDrag",value:function(e){var scrolled=e[this.mouseAxis[this.axis]]-this.down[this.axis];return this.config.infinite||(0===this.index&&scrolled>0||this.index===this.pages.length-1&&scrolled<0)&&(scrolled/=10),scrolled}},{key:"_setNavs",value:function(){this.navPrevEl&&this.navPrevEl.classList.toggle("active",this.config.infinite||this.index>0),this.navNextEl&&this.navNextEl.classList.toggle("active",this.config.infinite||this.index<this.pages.length-1)}},{key:"_setPips",value:function(index){this.config.pips&&(void 0===index&&(index=this.index),this.pips.forEach(function(pip,i){pip.firstElementChild.classList.toggle("active",i==index)}))}}]),Pageable}();